<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£ÙƒØ±ÙŠÙ„ÙŠ DZ | Ø§Ù„Ù…Ù†ØµØ© Ø±Ù‚Ù… 1 ğŸš€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap');
        
        body { 
            font-family: 'Cairo', sans-serif; 
            background: #0f172a; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© ÙØ®Ù…Ø© */
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ø®Ù„ÙÙŠØ© Ù…ØªÙØ§Ø¹Ù„Ø© */
        .bg-mesh {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(circle at 0% 0%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }

        .search-main {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 50px rgba(124, 58, 237, 0.3);
            border-radius: 20px;
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .search-main:focus-within { transform: scale(1.02); }

        .btn-premium {
            background: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
            transition: 0.3s;
        }

        .btn-premium:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(124, 58, 237, 0.6); }

        .ad-card {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 28px;
            transition: 0.4s;
        }

        .ad-card:hover {
            border-color: #7c3aed;
            transform: translateY(-8px);
            background: rgba(30, 41, 59, 0.9);
        }

        .no-select { -webkit-user-select: none; user-select: none; }
        
        @keyframes shine { from { left: -100%; } to { left: 100%; } }
        .shine-effect::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.1), transparent);
            transform: skewX(-25deg); animation: shine 3s infinite;
        }
    </style>
</head>
<body class="pb-10">
    <div class="bg-mesh"></div>

    <nav class="container mx-auto p-6 flex justify-between items-center">
        <div id="adminLogo" class="no-select cursor-pointer group">
            <h1 class="text-3xl font-black tracking-tighter transition group-hover:text-purple-400">
                Ø£ÙƒØ±ÙŠÙ„ÙŠ<span class="text-purple-600">DZ</span>
            </h1>
        </div>
        <div class="flex items-center gap-5">
            <button onclick="openAuth()" id="userTag" class="text-sm font-bold opacity-70 hover:opacity-100 transition">Ø¯Ø®ÙˆÙ„</button>
            <button onclick="checkAdd()" class="btn-premium px-6 py-2.5 rounded-xl font-black text-xs">Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù† </button>
        </div>
    </nav>

    <header class="container mx-auto px-6 pt-16 pb-20 text-center">
        <h2 class="text-5xl md:text-7xl font-black mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white to-purple-400 leading-tight">
            Ø¨ÙŠØª Ø¹Ø·Ù„ØªÙƒ Ø§Ù„Ù‚Ø§Ø¯Ù…<br>Ø¨Ø¶ØºØ·Ø© ÙˆØ§Ø­Ø¯Ø©.
        </h2>
        <p class="text-slate-400 font-medium mb-12 max-w-xl mx-auto">
            Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø£Ø³Ø±Ø¹ ÙˆØ§Ù„Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ù„ÙƒØ±Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ©.
        </p>

        <div class="search-main max-w-3xl mx-auto flex flex-col md:flex-row p-2 gap-2">
            <div class="flex-1 flex items-center px-4">
                <i class="fas fa-map-marked-alt text-purple-600 ml-3"></i>
                <input type="text" id="searchInput" onkeyup="searchAds()" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù†: Ø¨Ø¬Ø§ÙŠØ©ØŒ Ø¬ÙŠØ¬Ù„ØŒ Ø´Ù‚Ø©ØŒ ÙÙŠÙ„Ø§..." class="w-full py-4 bg-transparent outline-none text-slate-800 font-bold">
            </div>
            <button class="bg-slate-900 text-white px-10 py-4 rounded-xl font-black hover:bg-purple-700 transition">Ø§Ø³ØªÙƒØ´Ù</button>
        </div>
    </header>

    <main class="container mx-auto px-6">
        <div class="flex justify-between items-end mb-10">
            <div>
                <h3 class="text-2xl font-black">Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                <p class="text-xs text-purple-400 font-bold">ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</p>
            </div>
            <div id="count" class="glass px-4 py-2 text-xs font-bold tracking-widest uppercase">0 Ø¹Ø±ÙˆØ¶</div>
        </div>

        <div id="adsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
    </main>

    <div id="modalOverlay" class="fixed inset-0 bg-black/90 hidden z-[100] backdrop-blur-xl flex items-center justify-center p-4">
        <div id="authBox" class="hidden w-full max-w-sm glass p-8 animate-in fade-in zoom-in duration-300">
            <h3 class="text-2xl font-black mb-6">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹</h3>
            <div class="space-y-4">
                <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl outline-none focus:border-purple-500 font-bold">
                <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl outline-none focus:border-purple-500 font-bold">
                <button onclick="handleAuth('login')" class="w-full btn-premium py-4 rounded-xl font-black">Ø¯Ø®ÙˆÙ„</button>
                <button onclick="handleAuth('signup')" class="w-full text-xs text-slate-400 font-bold">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
                <button onclick="closeModals()" class="w-full text-[10px] opacity-30 mt-4">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>

        <div id="addBox" class="hidden w-full max-w-lg glass p-8 overflow-y-auto max-h-[90vh]">
            <h3 class="text-2xl font-black mb-6 text-purple-400 italic">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø± </h3>
            <form id="adForm" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="w" placeholder="Ø§Ù„ÙˆÙ„Ø§ÙŠØ©" class="p-4 bg-white/5 border border-white/10 rounded-xl outline-none font-bold" required>
                    <input type="text" id="m" placeholder="Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©" class="p-4 bg-white/5 border border-white/10 rounded-xl outline-none font-bold" required>
                </div>
                <input type="number" id="p" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù„ÙƒÙ„ Ù„ÙŠÙ„Ø© (Ø¯Ø¬)" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl outline-none font-bold text-yellow-400" required>
                <input type="tel" id="ph" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl outline-none font-bold" required>
                <textarea id="d" placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆÙ…ÙŠØ²Ø§ØªÙ‡..." class="w-full p-4 bg-white/5 border border-white/10 rounded-xl outline-none font-bold h-32" required></textarea>
                <button type="submit" class="w-full btn-premium py-4 rounded-xl font-black text-lg">Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶ </button>
                <button type="button" onclick="closeModals()" class="w-full text-slate-500 font-bold mt-2">ØªØ±Ø§Ø¬Ø¹</button>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAyGLsVF8sObw41F0nKlALbD8S1K1ttPC0",
            databaseURL: "https://ekri-li-default-rtdb.firebaseio.com",
            projectId: "ekri-li"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();

        let isAdmin = localStorage.getItem('akrili_admin_v2') === 'true';

        // --- Ù…ÙŠØ²Ø© Ø¢Ø¯Ù… Ø§Ù„Ø³Ø±ÙŠØ© ---
        let timer;
        const logo = document.getElementById('adminLogo');
        logo.addEventListener('mousedown', () => timer = setTimeout(openAdmin, 3000));
        logo.addEventListener('touchstart', () => timer = setTimeout(openAdmin, 3000));
        logo.addEventListener('mouseup', () => clearTimeout(timer));
        logo.addEventListener('touchend', () => clearTimeout(timer));

        function openAdmin() {
            const pass = prompt("ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ø±ÙŠ:");
            if(pass === "aouidjiademademaouidjinawal") {
                localStorage.setItem('akrili_admin_v2', 'true');
                alert("Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙŠØ§ Ø²Ø¹ÙŠÙ…! Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…ÙØ¹Ù„Ø©.");
                location.reload();
            }
        }

        // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª ---
        function openAuth() {
            document.getElementById('modalOverlay').classList.remove('hidden');
            document.getElementById('authBox').classList.remove('hidden');
            document.getElementById('addBox').classList.add('hidden');
        }
        function checkAdd() {
            if(auth.currentUser) {
                document.getElementById('modalOverlay').classList.remove('hidden');
                document.getElementById('addBox').classList.remove('hidden');
                document.getElementById('authBox').classList.add('hidden');
            } else openAuth();
        }
        function closeModals() { document.getElementById('modalOverlay').classList.add('hidden'); }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ---
        async function handleAuth(t) {
            const e = document.getElementById('email').value, p = document.getElementById('pass').value;
            try {
                t === 'login' ? await auth.signInWithEmailAndPassword(e, p) : await auth.createUserWithEmailAndPassword(e, p);
                location.reload();
            } catch (err) { alert(err.message); }
        }
        auth.onAuthStateChanged(user => { if(user) document.getElementById('userTag').innerText = "Ø®Ø±ÙˆØ¬"; });

        // --- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
        document.getElementById('adForm').addEventListener('submit', (e) => {
            e.preventDefault();
            db.ref('ads').push({
                w: document.getElementById('w').value, m: document.getElementById('m').value,
                p: document.getElementById('p').value, ph: document.getElementById('ph').value,
                d: document.getElementById('d').value, uid: auth.currentUser.uid, time: Date.now()
            }).then(() => location.reload());
        });

        function deleteAd(id) { if(confirm("Ø­Ø°ÙØŸ")) db.ref('ads/'+id).remove(); }

        function searchAds() { loadAds(document.getElementById('searchInput').value.toLowerCase()); }

        function loadAds(q = '') {
            db.ref('ads').on('value', snap => {
                const list = document.getElementById('adsList');
                list.innerHTML = '';
                let c = 0;
                snap.forEach(child => {
                    const ad = child.val(), id = child.key;
                    if(ad.w.includes(q) || ad.m.includes(q) || q === '') {
                        c++;
                        list.innerHTML += `
                        <div class="ad-card p-6 flex flex-col relative overflow-hidden shine-effect">
                            <div class="w-full h-44 bg-white/5 rounded-2xl mb-6 flex items-center justify-center">
                                <i class="fas fa-home text-5xl text-white/10"></i>
                            </div>
                            <div class="flex justify-between items-start mb-4">
                                <span class="bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter">${ad.w}</span>
                                <div class="text-2xl font-black text-yellow-400">${ad.p} <span class="text-xs">Ø¯Ø¬</span></div>
                            </div>
                            <h4 class="text-xl font-black mb-2">${ad.m}</h4>
                            <p class="text-slate-400 text-xs mb-8 line-clamp-2 font-bold italic">"${ad.d}"</p>
                            <div class="flex gap-3 mt-auto">
                                <a href="tel:${ad.ph}" class="flex-1 bg-white text-slate-900 text-center py-3.5 rounded-xl font-black text-xs transition hover:bg-purple-500 hover:text-white">Ø§ØªØµØ§Ù„</a>
                                <a href="https://wa.me/213${ad.ph}" class="w-12 h-12 glass flex items-center justify-center rounded-xl hover:text-green-400 transition"><i class="fab fa-whatsapp text-xl"></i></a>
                                ${isAdmin ? `<button onclick="deleteAd('${id}')" class="w-12 h-12 bg-red-500/20 text-red-500 flex items-center justify-center rounded-xl"><i class="fas fa-trash"></i></button>` : ''}
                            </div>
                        </div>`;
                    }
                });
                document.getElementById('count').innerText = c + " Ø¹Ø±ÙˆØ¶";
            });
        }
        loadAds();
    </script>
</body>
</html>
